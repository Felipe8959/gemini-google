import openai
import pandas as pd

# Configure sua chave de API da OpenAI
openai.api_key = "sua_chave_de_api_aqui"

# Carregue a base de dados (exemplo com um arquivo CSV)
df = pd.read_csv('manifestacoes.csv')

# Função para gerar resumo de melhorias
def gerar_resumo(manifestacoes):
    prompt = (
        "A seguir está uma lista de reclamações de clientes sobre um banco. "
        "Identifique os principais problemas e sugira melhorias com base nas reclamações:\n\n"
        f"{manifestacoes}\n\n"
        "Resuma os pontos mais críticos que precisam ser melhorados."
    )

    # Chamada para a API da OpenAI (modelo GPT)
    response = openai.Completion.create(
        engine="text-davinci-003",  # ou outro modelo como GPT-4
        prompt=prompt,
        max_tokens=200,
        temperature=0.5
    )

    return response.choices[0].text.strip()

# Combine as descrições das manifestações em um único texto
manifestacoes_texto = "\n".join(df['DESCRICAO DA MANIFESTACAO'].tolist())

# Gerar o resumo
resumo = gerar_resumo(manifestacoes_texto)

# Exibir o resumo
print("Resumo dos principais pontos a melhorar:")
print(resumo)
